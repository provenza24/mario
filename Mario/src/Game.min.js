Mario.Game=function(){this.map,this.layer,this.mario,this.customText,this.customTextStyle,this.debug,this.shiftJump,this.cameraOffset,this.animations,this.ennemies,this.items,this.background,this.transparencyGroup,this.keyboard,this.cursors,this.startButton,this.pauseButton,this.debugCustomButton,this.debugPhysicsButton,this.debugBoundButton,this.debugFpsButton,this.showBackgroundButton,this.scaleButton},Mario.Game.prototype={create:function(i){function t(i){i.index=s,i.alive=!1,i.type=0,i.animations.add("goomba-anim",[0,1],6,!0),i.animations.play("goomba-anim"),i.body.velocity.x=0,i.body.bounce.y=0,i.body.mass=60,i.body.linearDamping=1,i.body.collideWorldBounds=!0,i.body.allowGravity=!1,i.body.setSize(28,32,2,0),i.body.velocity.x=0,i.body.bounce.x=1,i.initialized=!1,(void 0==i.xAlive||null==i.xAlive)&&(i.xAlive=i.x-520),i.killed=!1}function a(t){t.finalPosition=t.body.y-50,t.index=s,t.type=1,t.animations.add("piranha-anim",[0,1],10,!0),t.animations.play("piranha-anim"),t.body.allowGravity=!1,t.alive=!1,t.body.collideWorldBounds=!1;var a=i.add.sprite(Math.floor(t.body.x-16),t.body.y,"pipe");this.transparencyGroup.add(a),a.body.allowGravity=!1,a.body.collideWorldBounds=!1,t.tween1={running:!1},t.tween2={running:!1}}function o(i,t,a){var o=i.add.sprite(32*t,32*a,"mystery");return o.type=0,o.xTile=t,o.yTile=a,o.animations.add("myster-anim",[0,1,2,3],10,!0),o.animations.play("myster-anim"),o}this.animations=[],this.animations[0]="mario-right",this.animations[5]="mario-left",this.animations[4]="mario-slide-right",this.animations[9]="mario-slide-left",this.animations[3]="mario-jump-right",this.animations[8]="mario-jump-left",this.animations[10]="mario-dead",this.cursors=i.input.keyboard.createCursorKeys(),this.pauseButton=i.input.keyboard.addKey(Phaser.Keyboard.P),this.startButton=i.input.keyboard.addKey(Phaser.Keyboard.ENTER),this.debugFpsButton=i.input.keyboard.addKey(Phaser.Keyboard.ONE),this.debugCustomButton=i.input.keyboard.addKey(Phaser.Keyboard.TWO),this.debugPhysicsButton=i.input.keyboard.addKey(Phaser.Keyboard.THREE),this.debugBoundsButton=i.input.keyboard.addKey(Phaser.Keyboard.THREE),this.debugBoundsButton=i.input.keyboard.addKey(Phaser.Keyboard.FOUR),this.leftButton=i.input.keyboard.addKey(Phaser.Keyboard.LEFT),this.rightButton=i.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.jumpButton=i.input.keyboard.addKey(Phaser.Keyboard.Z),this.accelerationButton=i.input.keyboard.addKey(Phaser.Keyboard.A),this.showBackgroundButton=i.input.keyboard.addKey(Phaser.Keyboard.FIVE),this.scaleButton=i.input.keyboard.addKey(Phaser.Keyboard.S),this.keyboard={debugCustom:!1,debugPhysics:!1,debugBounds:!1,debugFps:!1,showBackground:!0,scale:!0},i.time.advancedTiming=!1,this.debug={bodyBounds:!1,bodyPhysics:!1,customText:!0},i.physics.startSystem(Phaser.Physics.ARCADE),i.physics.arcade.checkCollision.up=!1,i.physics.arcade.checkCollision.down=!1,this.background=i.add.tileSprite(0,0,i.width,i.height,"background"),this.background.fixedToCamera=!0,this.map=i.add.tilemap("mario"),this.map.addTilesetImage("Tileset","tiles"),this.map.setCollisionBetween(0,200),this.layer=this.map.createLayer("world"),this.layer.resizeWorld(),this.items=i.add.group(),this.items.enableBody=!0,this.enemies=i.add.group(),this.enemies.enableBody=!0,this.transparencyGroup=i.add.group(),this.transparencyGroup.enableBody=!0,this.marioGroup=i.add.group(),this.map.createFromObjects("objectsLayer",1028,"coin",0,!0,!1,this.items),this.items.forEach(function(i){i.type=0,i.body.allowGravity=!1},this),this.items.callAll("animations.add","animations","spin",[0,1,2,3],10,!0),this.items.callAll("animations.play","animations","spin"),this.map.createFromObjects("objectsLayer",402,"goomba",0,!0,!1,this.enemies);var s=0;this.enemies.forEach(function(i){t(i),s++},this),this.map.createFromObjects("objectsLayer",1033,"piranhaPlant",0,!0,!1,this.enemies);for(var e=s;e<this.enemies.children.length;e++){var n=this.enemies.children[e];a(n),s++}i.physics.enable(this.enemies);for(var r=0;r<this.map.height;r++)for(var h=0;h<this.map.width;h++){var m=this.map.getTile(h,r);null!=m&&void 0!=m&&7==m.index&&this.transparencyGroup.add(o(i,h,r))}if(this.map.createFromObjects("objectsLayer",401,"mario",0,!0,!1,this.marioGroup),this.mario=this.marioGroup.getAt(0),this.mario.state={orientation:1,canJump:!0,falling:!1,direction:1,running:!1,jumping:!1,sliding:!1,oldAnimation:0,currentAnimation:0,allowShiftJump:!0},this.shiftJump={shift:!1,reajust:!1},this.mario.constants={ACCELERATION:.02,ACCELERATION_FAST:.04,ACCELERATION_MAX:1.4,ACCELERATION_FAST_MAX:2,DECCELERATION:.1,JUMP_TIMER_MAX:20,VELOCITY_MAX_Y:120,X_OFFSET:4,CAMERA_OFFSET:220},this.mario.jumptimer=0,i.physics.enable(this.mario),this.mario.body.velocity.x=0,this.mario.body.bounce.y=0,this.mario.body.mass=60,this.mario.body.linearDamping=1,this.mario.body.collideWorldBounds=!0,0==i.marioState?this.mario.body.setSize(32-this.mario.constants.X_OFFSET,32,2,0):(this.mario.loadTexture("mario-big"),this.mario.y=this.mario.y-29,this.mario.body.y=this.mario.body.y-29,this.mario.body.setSize(32-this.mario.constants.X_OFFSET,61,2,0)),this.mario.body.gravity.y=1600,this.mario.alive=!0,this.mario.frame=0,this.mario.animations.add("mario-right-anim",[0,1,2],18,!0),this.mario.animations.add("mario-jump-right-anim",[3]),this.mario.animations.add("mario-slide-right-anim",[4]),this.mario.animations.add("mario-left-anim",[5,6,7],18,!0),this.mario.animations.add("mario-jump-left-anim",[8]),this.mario.animations.add("mario-slide-left-anim",[9]),this.mario.animations.add("mario-dead-anim",[10]),i.camera.x=0,i.camera.y=0,this.cameraOffset=this.mario.constants.CAMERA_OFFSET,this.debug.customText){var d=i.add.sprite(0,0);d.fixedToCamera=!0,this.customTextStyle={font:"bold 12px Arial",fill:"#000"},this.customText=i.add.text(0,0,"(CanJump:"+this.mario.state.canJump+"\n(Jumping:"+this.mario.state.jumping+")\n(Moving:"+this.mario.state.running+")\n(oldAnimation:"+this.mario.state.oldAnimation+")\ncurrentAnimation:"+this.mario.state.currentAnimation+")",this.customTextStyle),d.addChild(this.customText),d.cameraOffset.x=10,d.cameraOffset.y=10,this.customText.visible=!1}this.preinitGame()},restartLevel:function(){this.state.start("Game")},preinitGame:function(){this.game.paused=!0;var i=this.game.add.bitmapText(10,this.game.width/2,"font","- PRESS START -",32);i.align="center",i.x=this.game.width/2-i.textWidth/2,this.startButton.onDown.add(function(){i.destroy(),this.game.paused=!1},this)},managePause:function(){this.game.paused=!0;var i=this.game.add.bitmapText(10,this.game.width/2,"font","- PAUSED -",32);i.align="center",i.x=this.camera.x+this.game.width/2-i.textWidth/2,this.pauseButton.onDown.add(function(){i.destroy(),this.game.paused=!1},this)},render:function(i){i.time.advancedTiming&&i.debug.text(i.time.fps||"--",2,14,"#00ff00"),this.debug.bodyBounds&&(i.debug.body(this.mario),i.debug.body(this.layer),this.enemies.forEach(function(t){i.debug.body(t)})),this.debug.bodyPhysics&&i.debug.bodyInfo(this.mario,32,this.game.width/2)},update:function(i){function t(t,a,o,s,e){var n=i.add.sprite(t,a,o);return i.physics.enable(n),n.body.velocity.x=s,n.body.velocity.y=e,n.body.gravity.y=1600,n}function a(t,a,o){var s=i.add.sprite(32*a,32*o,"coin");s.animations.add("coin-anim",[0,1,2,3],10,!0),s.animations.play("coin-anim"),s.type=100,t.add(s);var n=i.add.tween(s).to({y:s.y-64},150,Phaser.Easing.Linear.None);n.start(),n.onComplete.add(function(a){var o=i.add.sprite(a.x-4,a.y,"coin-explosion");t.add(o),o.animations.add("coin-explosion-anim",[0,1,2,3],10,!1),o.animations.play("coin-explosion-anim"),e(o,300),a.destroy()},this)}function o(t,a,o){var s=i.add.sprite(32*a,32*o,"wall");return s.type=100,s.xTile=a,s.yTile=o,t.add(s),s}function s(t,a){i.time.events.add(a,function(){t.body.allowGravity=!0,t.body.velocity.y=-600},this)}function e(t,a){i.time.events.add(a,function(){t.destroy()},this)}function n(i,t){if(i&&i.body){var a,o,s,e,n=i.body;s=n.velocity.x,e=n.velocity.y,o=s*s+e*e,o>t*t&&(a=Math.atan2(e,s),s=Math.cos(a)*t,e=Math.sin(a)*t,n.velocity.x=s,n.velocity.y=e)}}function r(t,a){console.log("collides item"),0==a.type&&(a.kill(),i.coins++)}function h(i,t,a,o){i.body.velocity.x=t,i.body.velocity.y=a,i.animations.stop(null,!0),i.frame=o,i.killed=!0}function m(i,t){if(1==t.type)i.alive=!1;else if(!t.killed){var a=i.body.y,o=t.body.y,s=i.body.x+this.mario.constants.X_OFFSET,n=i.body.width,r=i.body.height,m=i.body.x+(n-this.mario.constants.X_OFFSET),d=t.body.height,y=i.body.velocity.y>0&&0>a+r-(o+d/2)&&(s>=t.body.x-4&&s<=t.body.x+32||m>=t.body.x-4&&m<t.body.x+32);y?(h(t,0,0,2),e(t,1e3),i.body.velocity.y=-500):i.alive=!1}}function d(i){i.body.allowGravity=!0,i.body.gravity.y=1600,i.body.velocity.x=-80,i.initialized=!0}function y(t,a){if(t.body.y==t.finalPosition)t.tween1=i.add.tween(t).to({y:t.body.y+50},1e3,Phaser.Easing.Linear.In),t.tween2=i.add.tween(t).to({y:t.body.y+50},2e3,Phaser.Easing.Linear.In),t.tween1.chain(t.tween2),t.tween1.start();else{var o=Math.floor(a-t.body.x),s=o>=-76&&80>=o;s||(t.tween1=i.add.tween(t).to({y:t.finalPosition},1e3,Phaser.Easing.Linear.In),t.tween2=i.add.tween(t).to({y:t.finalPosition},2e3,Phaser.Easing.Linear.In),t.tween1.chain(t.tween2),t.tween1.start())}}if(changeAnimation=function(i,t,a,o){o!=t.state.currentAnimation&&(t.frame=o,t.state.oldAnimation=t.state.currentAnimation,t.state.currentAnimation=o)},this.debug.customText&&this.customText.setText("Position=("+Math.floor(this.mario.body.x)+","+Math.floor(this.mario.body.y)+")\nVelocity.x=("+this.mario.body.velocity.x+","+this.mario.body.velocity.x+")\nDirection="+this.mario.state.direction+"     Orientation="+this.mario.state.orientation+"\nRunning="+this.mario.state.running+"     Sliding="+this.mario.state.sliding+"\nJumping="+this.mario.state.jumping+"     CanJump="+this.mario.state.canJump+"     Falling="+this.mario.state.falling+"\nOldAnimation="+this.mario.state.oldAnimation+"     CurrentAnimation="+this.mario.state.currentAnimation+"\nCamera="+i.camera.x+","+i.camera.y+"     CameraOffset="+Math.floor(this.cameraOffset)+"\nCoins="+i.coins+"\n"),this.pauseButton.isDown&&!i.pause&&this.managePause(),this.debugFpsButton.isDown?0==this.keyboard.debugFps&&(this.keyboard.debugFps=!0,i.time.advancedTiming=!0):this.keyboard.debugFps=!1,this.debugCustomButton.isDown?0==this.keyboard.debugCustom&&(this.keyboard.debugCustom=!0,this.customText.visible=!this.customText.visible):this.keyboard.debugCustom=!1,this.debugPhysicsButton.isDown?0==this.keyboard.debugPhysics&&(this.keyboard.debugPhysics=!0,this.debug.bodyPhysics=!this.debug.bodyPhysics,this.debug.bodyPhysics||i.debug.stop()):this.keyboard.debugPhysics=!1,this.debugBoundsButton.isDown?0==this.keyboard.debugBounds&&(this.keyboard.debugBounds=!0,this.debug.bodyBounds=!this.debug.bodyBounds,this.debug.bodyBounds||i.debug.stop()):this.keyboard.debugBounds=!1,this.showBackgroundButton.isDown?0==this.keyboard.showBackground&&(this.keyboard.showBackground=!0,this.background.visible=!this.background.visible):this.keyboard.showBackground=!1,this.scaleButton.isDown?0==this.keyboard.scale&&(this.keyboard.scale=!0,0==i.marioState?(i.marioState=1,this.mario.body.y=this.mario.body.y-29,this.mario.body.setSize(32-this.mario.constants.X_OFFSET,61,2,0),this.mario.loadTexture("mario-big",0)):(i.marioState=0,this.mario.body.y=this.mario.body.y+29,this.mario.body.setSize(32-this.mario.constants.X_OFFSET,32,2,0),this.mario.loadTexture("mario",0)),changeAnimation(this.game,this.mario,this.animations,this.mario.state.currentAnimation)):this.keyboard.scale=!1,this.mario.alive){for(var l=this.accelerationButton.isDown?this.mario.constants.ACCELERATION_FAST:this.mario.constants.ACCELERATION,c=this.accelerationButton.isDown?this.mario.constants.ACCELERATION_FAST_MAX:this.mario.constants.ACCELERATION_MAX,u=0;u<this.transparencyGroup.length;u++){var b=this.transparencyGroup.getAt(u);b.x-i.camera.x<=-32&&b.destroy()}for(var u=0;u<this.enemies.length;u++){var p=this.enemies.getAt(u);0==p.alive&&(p.alive=i.camera.x>=p.xAlive),p.alive&&(p.body.y>=i.height||p.body.x-i.camera.x<=-32?p.destroy(!0):(0!=p.type||p.initialized?1!=p.type||p.tween1.isRunning||p.tween2.isRunning||y(p,this.mario.body.x):d(p),i.physics.arcade.collide(p,this.layer),i.physics.arcade.overlap(this.mario,p,m,null,this)))}for(var u=0;u<this.enemies.length;u++)for(var g=this.enemies.getAt(u),f=u+1;f<this.enemies.length-1;f++){var x=this.enemies.getAt(f);g.alive&&x.alive&&!g.killed&&!x.killed&&i.physics.arcade.collide(g,x)}i.physics.arcade.collide(this.mario,this.layer),i.physics.arcade.overlap(this.mario,this.items,r,null,this);var v=(this.mario.body.x,this.mario.body.y);if(this.mario.state.allowShiftJump&&this.mario.body.blocked.up&&Math.abs(this.mario.body.velocity.x<=20)){var T=Math.floor((this.mario.x+32)/32),A=Math.floor(this.mario.y/32)-1,E=this.map.getTile(T,A,this.layer,!0);-1!=E.index?(T=Math.floor((this.mario.x+22)/32),E=this.map.getTile(T,A,this.layer,!0),-1==E.index?(this.shiftJump.shift=!0,this.mario.body.x=32*T):this.mario.state.allowShiftJump=!1):(T=Math.floor(this.mario.x/32),E=this.map.getTile(T,A,this.layer,!0),-1!=E.index?(T=Math.floor((this.mario.x+10)/32),E=this.map.getTile(T,A,this.layer,!0),-1==E.index&&(this.shiftJump.shift=!0,this.mario.body.x=32*T)):this.mario.state.allowShiftJump=!1)}if(this.jumpButton.isDown&&this.mario.body.onFloor()&&this.mario.state.canJump?(this.mario.body.acceleration.y=3,this.mario.jumptimer=1,this.mario.body.velocity.y=-this.mario.constants.VELOCITY_MAX_Y,this.mario.state.canJump=!1):this.jumpButton.isDown&&0!=this.mario.jumptimer?this.mario.jumptimer>this.mario.constants.JUMP_TIMER_MAX?(this.mario.jumptimer=0,this.mario.body.acceleration.y=0):(this.mario.body.acceleration.y=this.mario.body.acceleration.y-.01,this.mario.jumptimer++,this.mario.body.velocity.y=-this.mario.constants.VELOCITY_MAX_Y*this.mario.body.acceleration.y):0!=this.mario.jumptimer&&(this.mario.body.acceleration.y=0,this.mario.jumptimer=0),this.mario.body.blocked.up&&this.shiftJump.shift===!1){this.mario.jumptimer=0;var T=Math.floor(this.mario.x/32),A=Math.floor(this.mario.y/32)-1,w=this.map.getTile(T,A,this.layer,!0),k=w,B=this.map.getTile(T+1,A,this.layer,!0);if(-1==w.index)k=B;else if(-1!=w.index&&-1!=B.index){var T=Math.floor((this.mario.x+16)/32);k=this.map.getTile(T,A,this.layer,!0)}if(7==k.index||4==k.index){var C=null,O=5;if(7==k.index)for(var P=!1,u=0;u<this.transparencyGroup.children.length&&!P;u++)C=this.transparencyGroup.children[u],0==C.type&&C.xTile==k.x&&C.yTile==k.y&&(P=!0);else 4==k.index&&0==i.marioState&&(C=o(this.transparencyGroup,k.x,k.y),O=4);if(i.marioState>0&&7!=k.index){this.map.removeTile(k.x,k.y),this.map.removeTile(k.x,k.y);var F=t(32*k.x,32*k.y,"brokenWall1",-200,-300),S=t(32*k.x+16,32*k.y,"brokenWall2",200,-300),M=t(32*k.x,32*k.y+16,"brokenWall3",-200,-200),j=t(32*k.x+16,32*k.y+16,"brokenWall4",200,-200);this.transparencyGroup.add(F),this.transparencyGroup.add(S),this.transparencyGroup.add(M),this.transparencyGroup.add(j),e(F,3e3),e(S,3e3),e(M,3e3),e(j,3e3)}else{C.index=k.index,this.map.replace(k.index,-1,k.x,k.y,1,1);var R=i.add.tween(C).to({y:C.y-12},80,Phaser.Easing.Linear.None),L=i.add.tween(C).to({y:C.y},80,Phaser.Easing.Linear.None);R.chain(L),R.start(),L.onComplete.add(function(i){this.map.replace(-1,O,i.xTile,i.yTile,1,1),i.kill()},this),7==C.index&&(a(this.items,k.x,k.y-1),i.coins++)}}}this.mario.state.jumping=!this.mario.body.onFloor(),this.mario.state.jumping||this.jumpButton.isDown||(this.mario.state.canJump=!0,this.mario.state.allowShiftJump=!0);var G=-1;if(this.leftButton.isDown?(this.mario.state.orientation=0,this.mario.body.blocked.left?(this.mario.animations.stop(null,!0),this.mario.body.acceleration.x=0,this.mario.state.running=!1):(1==this.mario.state.direction&&this.mario.body.acceleration.x>0?this.mario.constants.DECCELERATION>=this.mario.body.acceleration.x?(this.mario.body.acceleration.x=0,this.mario.state.sliding=!1,G=5):(this.mario.body.acceleration.x-=this.mario.constants.DECCELERATION,G=9,this.mario.state.sliding=!0):(this.mario.state.running=!0,G=5,this.mario.body.acceleration.x=this.mario.body.acceleration.x+l,this.mario.body.acceleration.x=this.mario.body.acceleration.x>c?c:this.mario.body.acceleration.x,this.mario.state.direction=0,velocity=-150),this.mario.body.velocity.x=velocity*this.mario.body.acceleration.x)):this.rightButton.isDown?(this.mario.state.orientation=1,this.mario.body.blocked.right?(this.mario.animations.stop(null,!0),this.mario.body.acceleration.x=0,this.mario.state.running=!1):(0==this.mario.state.direction&&this.mario.body.acceleration.x>0?this.mario.constants.DECCELERATION>=this.mario.body.acceleration.x?(this.mario.body.acceleration.x=0,this.mario.state.sliding=!1,G=0,this.mario.state.direction=1):(this.mario.body.acceleration.x-=this.mario.constants.DECCELERATION,G=4,this.mario.state.sliding=!0):(this.mario.state.running=!0,G=0,this.mario.state.direction=1,velocity=150,this.mario.body.acceleration.x=this.mario.body.acceleration.x+l,this.mario.body.acceleration.x=this.mario.body.acceleration.x>c?c:this.mario.body.acceleration.x),this.mario.body.velocity.x=velocity*this.mario.body.acceleration.x)):(this.mario.body.acceleration.x>0&&(this.mario.constants.DECCELERATION>this.mario.body.acceleration.x?this.mario.body.acceleration.x=0:this.mario.body.acceleration.x-=this.mario.constants.DECCELERATION),this.mario.body.velocity.x=150*(0==this.mario.state.direction?-this.mario.body.acceleration.x:this.mario.body.acceleration.x)),this.mario.state.jumping&&(G=0==this.mario.state.orientation?8:3),0==this.mario.body.acceleration.x&&(this.mario.state.jumping||(G=0==this.mario.state.orientation?5:0),this.mario.state.sliding=!1,this.mario.animations.stop(null,!0),this.mario.state.running=!1),-1!=G&&(changeAnimation(this.game,this.mario,this.animations,G),this.mario.animations.play(this.animations[G]+"-anim")),(0==this.mario.state.currentAnimation||1==this.mario.state.currentAnimation)&&(this.mario.animations.currentAnim.speed=10+5*this.mario.body.acceleration.x),1==this.shiftJump.shift&&this.mario.state.falling&&(this.shiftJump.shift=!1,this.shiftJump.reajust=!0),0==this.shiftJump.shift){var _=this.mario.body.deltaAbsX();if(this.mario.body.velocity.x<0||this.shiftJump.reajust){var J=i.camera.x-this.mario.body.x,D=this.cameraOffset+J;this.cameraOffset=this.cameraOffset-D,this.shiftJump.reajust=!1}else this.mario.body.velocity.x>0&&(this.cameraOffset<this.mario.constants.CAMERA_OFFSET?(this.cameraOffset+=_,this.cameraOffset=this.cameraOffset>this.mario.constants.CAMERA_OFFSET?this.mario.constants.CAMERA_OFFSET:this.cameraOffset):i.camera.x=this.mario.body.x-this.cameraOffset)}var I=Math.floor(this.cameraOffset);0>I&&(this.mario.body.x=i.camera.x,0==this.mario.state.direction&&(this.mario.body.velocity.x=0)),this.mario.state.falling=this.mario.y-v<0,this.mario.state.falling&&n(this.mario,800),this.mario.body.y>i.height&&(this.mario.alive=!1),0==this.mario.alive&&(i.lifes--,this.mario.animations.stop(null,!0),changeAnimation(this.game,this.mario,this.animations,10),this.mario.body.velocity.x=0,this.mario.body.velocity.y=0,this.mario.body.allowGravity=!1,this.enemies.forEach(function(i){i.body.allowGravity=!1,i.body.velocity.x=0,i.body.velocity.y=0,i.animations.stop(null,!0),1==i.type&&(i.tween1.isRunning?i.tween1.stop():i.tween2.isRunning&&i.tween2.stop())},this),this.items.forEach(function(i){i.animations.stop(null,!0)},this),s(this.mario,1e3)),0==this.shiftJump.shift&&(this.background.tilePosition.x-=.5*(this.camera.x>0&&this.cameraOffset>=this.mario.constants.CAMERA_OFFSET?this.mario.deltaX:0))}else this.mario.body.y>600&&i.lifes>0&&this.restartLevel()}};